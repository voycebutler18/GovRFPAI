<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GovRFP AI - Defense Contracting Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            line-height: 1.6;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: #f8f9fa;
            border-right: 1px solid #e5e7eb;
            padding: 24px;
            overflow-y: auto;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 32px;
            text-align: center;
        }

        .nav-section {
            margin-bottom: 32px;
        }

        .nav-title {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .nav-item {
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-item:hover {
            background: #e5e7eb;
        }

        .nav-item.active {
            background: #1f2937;
            color: white;
        }

        .nav-icon {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 24px 32px;
            border-bottom: 1px solid #e5e7eb;
            background: white;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .header p {
            color: #6b7280;
            font-size: 16px;
        }

        .content-area {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .main-panel {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        .chat-sidebar {
            width: 320px;
            background: #f8f9fa;
            border-left: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
            background: white;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid #e5e7eb;
            background: white;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
            background: white;
        }

        .input-field:focus {
            outline: none;
            border-color: #1f2937;
        }

        .textarea-field {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .select-field {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            padding: 16px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #1f2937;
            color: white;
        }

        .btn-primary:hover {
            background: #374151;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #1f2937;
            border: 1px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .compliance-panel {
            background: #f8f9fa;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .compliance-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .compliance-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .compliance-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .compliance-checkbox.checked {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .status-bar {
            background: #f3f4f6;
            padding: 16px 32px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .status-info {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.secure {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.draft {
            background: #fef3c7;
            color: #92400e;
        }

        .generated-content {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            max-height: 400px;
            overflow-y: auto;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e5e7eb;
        }

        .message {
            margin-bottom: 16px;
            padding: 12px;
            border-radius: 8px;
        }

        .message.user {
            background: #e5e7eb;
            margin-left: 20px;
        }

        .message.ai {
            background: #f3f4f6;
            margin-right: 20px;
        }

        .hidden {
            display: none;
        }

        .rfp-preview {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 32px;
            margin-top: 24px;
            font-family: 'Times New Roman', serif;
            line-height: 1.8;
        }

        .rfp-header {
            text-align: center;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 2px solid #1f2937;
        }

        .rfp-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .rfp-number {
            font-size: 16px;
            color: #6b7280;
        }

        .rfp-section {
            margin-bottom: 24px;
        }

        .rfp-section h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #1f2937;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 24px;
        }

        .progress-fill {
            height: 100%;
            background: #10b981;
            transition: width 0.3s ease;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .feature-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: #1f2937;
            transform: translateY(-2px);
        }

        .feature-icon {
            width: 32px;
            height: 32px;
            background: #1f2937;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: 16px;
        }

        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .auth-modal {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .auth-title {
            font-size: 24px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .auth-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .auth-button {
            width: 100%;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .auth-button:hover {
            border-color: #1f2937;
            background: #f9fafb;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid #1f2937;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #10b981;
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.info {
            background: #3b82f6;
        }
    </style>
</head>
<body>
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-modal">
            <h2 class="auth-title">Secure Access Required</h2>
            <p class="auth-subtitle">Please authenticate using your government credentials</p>
            <button class="auth-button" onclick="authenticateCAC()">
                🔐 CAC/PIV Authentication
            </button>
            <button class="auth-button" onclick="authenticateEmail()">
                ✉️ Secure Email Domain
            </button>
            <button class="auth-button" onclick="authenticateDemo()">
                🚀 Demo Mode (Development)
            </button>
        </div>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="logo">GovRFP AI</div>
            
            <div class="nav-section">
                <div class="nav-title">Acquisition Types</div>
                <div class="nav-item active" onclick="setAcquisitionType('far')">
                    <div class="nav-icon">📋</div>
                    FAR Contracts
                </div>
                <div class="nav-item" onclick="setAcquisitionType('ota')">
                    <div class="nav-icon">⚡</div>
                    OTA (Other Transaction)
                </div>
                <div class="nav-item" onclick="setAcquisitionType('cso')">
                    <div class="nav-icon">💡</div>
                    CSO (Commercial Solutions)
                </div>
                <div class="nav-item" onclick="setAcquisitionType('sbir')">
                    <div class="nav-icon">🔬</div>
                    SBIR/STTR
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Tools</div>
                <div class="nav-item" onclick="showSection('dashboard')">
                    <div class="nav-icon">🏠</div>
                    Dashboard
                </div>
                <div class="nav-item" onclick="showSection('generator')">
                    <div class="nav-icon">✨</div>
                    RFP Generator
                </div>
                <div class="nav-item" onclick="showSection('templates')">
                    <div class="nav-icon">📄</div>
                    Templates
                </div>
                <div class="nav-item" onclick="showSection('compliance')">
                    <div class="nav-icon">✅</div>
                    Compliance Check
                </div>
                <div class="nav-item" onclick="showSection('history')">
                    <div class="nav-icon">📚</div>
                    Document History
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Security</div>
                <div class="nav-item" onclick="showSection('security')">
                    <div class="nav-icon">🔒</div>
                    Security Status
                </div>
                <div class="nav-item" onclick="showSection('audit')">
                    <div class="nav-icon">📊</div>
                    Audit Trail
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">RFP Generator</h1>
                <p id="pageDescription">Create regulation-compliant RFPs with AI assistance</p>
            </div>

            <div class="content-area">
                <div class="main-panel">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>

                    <!-- Dashboard Section -->
                    <div id="dashboardSection" class="section hidden">
                        <div class="feature-grid">
                            <div class="feature-card" onclick="showSection('generator')">
                                <div class="feature-icon">✨</div>
                                <h3>AI RFP Generator</h3>
                                <p>Create comprehensive RFPs from simple project descriptions using advanced AI</p>
                            </div>
                            <div class="feature-card" onclick="showSection('templates')">
                                <div class="feature-icon">📄</div>
                                <h3>Template Library</h3>
                                <p>Access pre-built templates for common acquisition types and requirements</p>
                            </div>
                            <div class="feature-card" onclick="showSection('compliance')">
                                <div class="feature-icon">✅</div>
                                <h3>Compliance Checker</h3>
                                <p>Ensure your RFPs meet all regulatory requirements and security standards</p>
                            </div>
                            <div class="feature-card" onclick="showSection('history')">
                                <div class="feature-icon">📚</div>
                                <h3>Document History</h3>
                                <p>Track versions, approvals, and modifications of your RFP documents</p>
                            </div>
                        </div>

                        <div class="section-title" style="margin-top: 32px;">Recent Activity</div>
                        <div class="generated-content">
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>Draft RFP created for Cybersecurity Platform - 2 hours ago</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>Template updated for OTA Medical Device - Yesterday</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>Compliance check passed for FAR-23456 - 2 days ago</span>
                            </div>
                        </div>
                    </div>

                    <!-- Generator Section -->
                    <div id="generatorSection" class="section">
                        <div class="input-group">
                            <label class="input-label">Project Title</label>
                            <input type="text" class="input-field" id="projectTitle" placeholder="Enter your project title (e.g., Advanced Cybersecurity Platform)">
                        </div>

                        <div class="input-group">
                            <label class="input-label">Mission Objective</label>
                            <textarea class="input-field textarea-field" id="missionObjective" placeholder="Describe your mission objective and requirements in detail..."></textarea>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Acquisition Type</label>
                            <select class="input-field select-field" id="acquisitionType">
                                <option value="far">FAR-Based Contract</option>
                                <option value="ota">Other Transaction Authority (OTA)</option>
                                <option value="cso">Commercial Solutions Opening (CSO)</option>
                                <option value="sbir">SBIR/STTR</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Security Classification</label>
                            <select class="input-field select-field" id="securityLevel">
                                <option value="cui">CUI (Controlled Unclassified Information)</option>
                                <option value="confidential">Confidential</option>
                                <option value="secret">Secret</option>
                                <option value="topsecret">Top Secret</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Contract Value Range</label>
                            <select class="input-field select-field" id="contractValue">
                                <option value="micro">Micro Purchase ($0 - $10K)</option>
                                <option value="small">Small Purchase ($10K - $250K)</option>
                                <option value="simplified">Simplified Acquisition ($250K - $7.5M)</option>
                                <option value="major">Major Acquisition ($7.5M+)</option>
                            </select>
                        </div>

                        <div class="compliance-panel">
                            <div class="compliance-title">Required Compliance Standards</div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox" id="nist800171" onclick="toggleCompliance('nist800171')">✓</div>
                                <span>NIST 800-171 (CUI Protection)</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox" id="cmmc" onclick="toggleCompliance('cmmc')">✓</div>
                                <span>CMMC (Cybersecurity Maturity Model)</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox" id="fisma" onclick="toggleCompliance('fisma')">✓</div>
                                <span>FISMA (Federal Information Security)</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox" id="dfars" onclick="toggleCompliance('dfars')">✓</div>
                                <span>DFARS (Defense Federal Acquisition)</span>
                            </div>
                        </div>

                        <div class="button-group">
                            <button class="btn btn-primary" onclick="generateRFP()">
                                ✨ Generate RFP
                            </button>
                            <button class="btn btn-secondary" onclick="saveTemplate()">
                                💾 Save as Template
                            </button>
                            <button class="btn btn-secondary" onclick="clearForm()">
                                🗑️ Clear Form
                            </button>
                        </div>

                        <div id="rfpPreview" class="rfp-preview hidden">
                            <div class="rfp-header">
                                <div class="rfp-title" id="rfpTitle">REQUEST FOR PROPOSAL</div>
                                <div class="rfp-number" id="rfpNumber">RFP-2025-001</div>
                            </div>
                            <div id="rfpContent"></div>
                        </div>
                    </div>

                    <!-- Templates Section -->
                    <div id="templatesSection" class="section hidden">
                        <div class="section-title">RFP Templates</div>
                        <div class="feature-grid">
                            <div class="feature-card" onclick="loadTemplate('cyber')">
                                <div class="feature-icon">🔒</div>
                                <h3>Cybersecurity Platform</h3>
                                <p>Template for IT security and cybersecurity solutions</p>
                            </div>
                            <div class="feature-card" onclick="loadTemplate('medical')">
                                <div class="feature-icon">🏥</div>
                                <h3>Medical Device Development</h3>
                                <p>Template for medical technology and device contracts</p>
                            </div>
                            <div class="feature-card" onclick="loadTemplate('aerospace')">
                                <div class="feature-icon">🚀</div>
                                <h3>Aerospace & Defense</h3>
                                <p>Template for aerospace engineering and defense systems</p>
                            </div>
                            <div class="feature-card" onclick="loadTemplate('research')">
                                <div class="feature-icon">🔬</div>
                                <h3>Research & Development</h3>
                                <p>Template for R&D and innovation projects</p>
                            </div>
                        </div>
                    </div>

                    <!-- Compliance Section -->
                    <div id="complianceSection" class="section hidden">
                        <div class="section-title">Compliance Checker</div>
                        <div class="compliance-panel">
                            <div class="compliance-title">Document Analysis</div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>FAR compliance verified</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>Security clauses included</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>Evaluation criteria complete</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox">⚠️</div>
                                <span>CMMC requirements need review</span>
                            </div>
                        </div>
                    </div>

                    <!-- History Section -->
                    <div id="historySection" class="section hidden">
                        <div class="section-title">Document History</div>
                        <div class="generated-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                                <div>
                                    <h4>Cybersecurity Platform RFP</h4>
                                    <p style="color: #6b7280; font-size: 14px;">Created: Jan 15, 2025 | Status: Draft</p>
                                </div>
                                <div>
                                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 14px;">View</button>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                                <div>
                                    <h4>Medical Device Development</h4>
                                    <p style="color: #6b7280; font-size: 14px;">Created: Jan 12, 2025 | Status: Approved</p>
                                </div>
                                <div>
                                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 14px;">View</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Section -->
                    <div id="securitySection" class="section hidden">
                        <div class="section-title">Security Status</div>
                        <div class="compliance-panel">
                            <div class="compliance-title">Security Compliance</div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>TLS 1.3 Encryption Active</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>CAC/PIV Authentication</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>FedRAMP Moderate Ready</span>
                            </div>
                            <div class="compliance-item">
                                <div class="compliance-checkbox checked">✓</div>
                                <span>FISMA Controls Implemented</span>
                            </div>
                        </div>
                    </div>

                    <!-- Audit Section -->
                    <div id="auditSection" class="section hidden">
                        <div class="section-title">Audit Trail</div>
                        <div class="generated-content">
                            <div style="margin-bottom: 12px; padding: 12px; border-left: 4px solid #10b981; background: #f0fdf4;">
                                <strong>15:32:45</strong> - RFP generated for Cybersecurity Platform
                            </div>
                            <div style="margin-bottom: 12px; padding: 12px; border-left: 4px solid #3b82f6; background: #eff6ff;">
                                <strong>15:30:12</strong> - User authenticated via CAC
                            </div>
                            <div style="margin-bottom: 12px; padding: 12px; border-left: 4px solid #f59e0b; background: #fffbeb;">
                                <strong>14:45:23</strong> - Template accessed: Medical Device Development
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-sidebar">
                    <div class="chat-header">
                        <h3 style="font-size: 16px; font-weight: 600; color: #1f2937;">AI Assistant</h3>
                        <p style="font-size: 14px; color: #6b7280;">Ask questions about regulations, requirements, or get help with your RFP</p>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message ai">
                            <strong>AI Assistant:</strong> Hello! I'm here to help you create compliant RFPs. What would you like to know about acquisition regulations, security requirements, or contract structuring?
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" class="input-field" id="chatInput" placeholder="Ask about regulations, requirements..." onkeypress="handleChatKeyPress(event)">
                        <button class="btn btn-primary" onclick="sendChatMessage()" style="margin-top: 8px; width: 100%;">Send</button>
                    </div>
                </div>
            </div>

            <div class="status-bar">
                <div class="status-info">
                    <div class="status-badge secure">🔒 Secure Connection</div>
                    <div class="status-badge draft">📝 Draft Mode</div>
                    <span style="font-size: 12px; color: #6b7280;">User: contracting.officer@defense.gov</span>
                </div>
                <div style="font-size: 12px; color: #6b7280;">
                    Last saved: <span id="lastSaved">Never</span>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // State management
        let currentSection = 'generator';
        let currentAcquisitionType = 'far';
        let complianceItems = {
            nist800171: true,
            cmmc: true,
            fisma: true,
            dfars: true
        };
        let isAuthenticated = false;
        let currentUser = null;

        // Authentication functions
        function authenticateCAC() {
            showNotification('CAC authentication initiated...', 'info');
            setTimeout(() => {
                isAuthenticated = true;
                currentUser = { 
                    name: 'John Smith', 
                    email: 'john.smith@defense.gov',
                    role: 'Contracting Officer',
                    clearance: 'Secret'
                };
                document.getElementById('authOverlay').style.display = 'none';
                showNotification('Successfully authenticated via CAC', 'success');
            }, 2000);
        }

        function authenticateEmail() {
            showNotification('Email authentication initiated...', 'info');
            setTimeout(() => {
                isAuthenticated = true;
                currentUser = { 
                    name: 'Jane Doe', 
                    email: 'jane.doe@army.mil',
                    role: 'Contracting Specialist',
                    clearance: 'Confidential'
                };
                document.getElementById('authOverlay').style.display = 'none';
                showNotification('Successfully authenticated via secure email', 'success');
            }, 1500);
        }

        function authenticateDemo() {
            isAuthenticated = true;
            currentUser = { 
                name: 'Demo User', 
                email: 'demo@defense.gov',
                role: 'Contracting Officer',
                clearance: 'Demo'
            };
            document.getElementById('authOverlay').style.display = 'none';
            showNotification('Demo mode activated', 'success');
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Update header based on section
            const headers = {
                dashboard: { title: 'Dashboard', desc: 'Overview of your RFP activities and quick access to tools' },
                generator: { title: 'RFP Generator', desc: 'Create regulation-compliant RFPs with AI assistance' },
                templates: { title: 'Template Library', desc: 'Access pre-built templates for common acquisition types' },
                compliance: { title: 'Compliance Checker', desc: 'Verify your RFPs meet all regulatory requirements' },
                history: { title: 'Document History', desc: 'Track versions and modifications of your RFP documents' },
                security: { title: 'Security Status', desc: 'Monitor security compliance and authentication status' },
                audit: { title: 'Audit Trail', desc: 'Review system access and document modification logs' }
            };
            
            if (headers[sectionName]) {
                document.getElementById('pageTitle').textContent = headers[sectionName].title;
                document.getElementById('pageDescription').textContent = headers[sectionName].desc;
            }
            
            currentSection = sectionName;
            updateProgress();
        }

        function setAcquisitionType(type) {
            currentAcquisitionType = type;
            document.getElementById('acquisitionType').value = type;
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.onclick && item.onclick.toString().includes(type)) {
                    item.classList.add('active');
                }
            });
            
            showNotification(`Acquisition type set to ${type.toUpperCase()}`, 'info');
        }

        // Compliance functions
        function toggleCompliance(item) {
            complianceItems[item] = !complianceItems[item];
            const checkbox = document.getElementById(item);
            if (complianceItems[item]) {
                checkbox.classList.add('checked');
                checkbox.textContent = '✓';
            } else {
                checkbox.classList.remove('checked');
                checkbox.textContent = '';
            }
            updateProgress();
        }

        // RFP Generation
        function generateRFP() {
            const title = document.getElementById('projectTitle').value;
            const objective = document.getElementById('missionObjective').value;
            const acqType = document.getElementById('acquisitionType').value;
            const secLevel = document.getElementById('securityLevel').value;
            const contractValue = document.getElementById('contractValue').value;
            
            if (!title || !objective) {
                showNotification('Please fill in project title and mission objective', 'error');
                return;
            }
            
            showNotification('Generating RFP...', 'info');
            
            // Simulate AI generation
            setTimeout(() => {
                const rfpContent = generateRFPContent(title, objective, acqType, secLevel, contractValue);
                document.getElementById('rfpContent').innerHTML = rfpContent;
                document.getElementById('rfpTitle').textContent = title.toUpperCase();
                document.getElementById('rfpNumber').textContent = `RFP-${new Date().getFullYear()}-${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;
                document.getElementById('rfpPreview').classList.remove('hidden');
                
                updateProgress(100);
                showNotification('RFP generated successfully!', 'success');
                updateLastSaved();
            }, 3000);
        }

        function generateRFPContent(title, objective, acqType, secLevel, contractValue) {
            const acqTypeNames = {
                far: 'FAR-Based Contract',
                ota: 'Other Transaction Authority',
                cso: 'Commercial Solutions Opening',
                sbir: 'Small Business Innovation Research'
            };
            
            return `
                <div class="rfp-section">
                    <h3>1. INTRODUCTION</h3>
                    <p>The Department of Defense hereby solicits proposals for ${title}. This acquisition will be conducted under ${acqTypeNames[acqType]} authority with ${secLevel.toUpperCase()} security classification requirements.</p>
                </div>
                
                <div class="rfp-section">
                    <h3>2. SCOPE OF WORK</h3>
                    <p>${objective}</p>
                    <p>The contractor shall provide all necessary personnel, equipment, facilities, and services to accomplish the stated objectives in compliance with all applicable federal regulations and security requirements.</p>
                </div>
                
                <div class="rfp-section">
                    <h3>3. TECHNICAL REQUIREMENTS</h3>
                    <p>All deliverables must meet the following technical specifications:</p>
                    <ul style="margin-left: 20px;">
                        <li>Compliance with relevant DoD and federal standards</li>
                        <li>Integration with existing government systems</li>
                        <li>Scalability for future requirements</li>
                        <li>Comprehensive documentation and training materials</li>
                    </ul>
                </div>
                
                <div class="rfp-section">
                    <h3>4. SECURITY REQUIREMENTS</h3>
                    <p>This contract requires ${secLevel.toUpperCase()} security clearance. The following security standards apply:</p>
                    <ul style="margin-left: 20px;">
                        ${complianceItems.nist800171 ? '<li>NIST 800-171 Controlled Unclassified Information (CUI) protection</li>' : ''}
                        ${complianceItems.cmmc ? '<li>Cybersecurity Maturity Model Certification (CMMC) requirements</li>' : ''}
                        ${complianceItems.fisma ? '<li>Federal Information Security Management Act (FISMA) compliance</li>' : ''}
                        ${complianceItems.dfars ? '<li>Defense Federal Acquisition Regulation Supplement (DFARS) clauses</li>' : ''}
                    </ul>
                </div>
                
                <div class="rfp-section">
                    <h3>5. EVALUATION CRITERIA</h3>
                    <p>Proposals will be evaluated based on the following criteria:</p>
                    <ul style="margin-left: 20px;">
                        <li>Technical Approach (40%)</li>
                        <li>Management Approach (25%)</li>
                        <li>Past Performance (20%)</li>
                        <li>Cost/Price (15%)</li>
                    </ul>
                </div>
                
                <div class="rfp-section">
                    <h3>6. SUBMISSION REQUIREMENTS</h3>
                    <p>Proposals must be submitted electronically through the designated secure portal no later than [INSERT DATE]. Late submissions will not be considered.</p>
                </div>
                
                <div class="rfp-section">
                    <h3>7. CONTRACT INFORMATION</h3>
                    <p>Contract Type: ${acqTypeNames[acqType]}<br>
                    Estimated Value: ${contractValue}<br>
                    Period of Performance: [INSERT PERIOD]<br>
                    Place of Performance: [INSERT LOCATION]</p>
                </div>
            `;
        }

        // Template functions
        function loadTemplate(templateType) {
            const templates = {
                cyber: {
                    title: 'Advanced Cybersecurity Platform',
                    objective: 'Develop and implement a comprehensive cybersecurity platform capable of real-time threat detection, automated incident response, and continuous security monitoring for critical DoD networks. The solution must integrate with existing security infrastructure and provide scalable protection against emerging cyber threats.',
                    acqType: 'far',
                    secLevel: 'secret'
                },
                medical: {
                    title: 'Medical Device Development Platform',
                    objective: 'Design and develop innovative medical devices for military healthcare applications, including portable diagnostic equipment, telemedicine solutions, and battlefield medical support systems. The platform must meet FDA regulatory requirements and military specifications.',
                    acqType: 'ota',
                    secLevel: 'cui'
                },
                aerospace: {
                    title: 'Next-Generation Aerospace System',
                    objective: 'Research, develop, and prototype advanced aerospace technologies including propulsion systems, avionics, and flight control systems. The solution must demonstrate improved performance, reliability, and maintainability over existing systems.',
                    acqType: 'ota',
                    secLevel: 'secret'
                },
                research: {
                    title: 'Advanced Research and Development Initiative',
                    objective: 'Conduct cutting-edge research in emerging technologies with potential military applications. Focus areas include artificial intelligence, quantum computing, advanced materials, and biotechnology. Deliverables include research reports, prototypes, and technology demonstrations.',
                    acqType: 'sbir',
                    secLevel: 'cui'
                }
            };
            
            if (templates[templateType]) {
                document.getElementById('projectTitle').value = templates[templateType].title;
                document.getElementById('missionObjective').value = templates[templateType].objective;
                document.getElementById('acquisitionType').value = templates[templateType].acqType;
                document.getElementById('securityLevel').value = templates[templateType].secLevel;
                
                setAcquisitionType(templates[templateType].acqType);
                showSection('generator');
                showNotification(`Template loaded: ${templates[templateType].title}`, 'success');
            }
        }

        function saveTemplate() {
            const title = document.getElementById('projectTitle').value;
            if (!title) {
                showNotification('Please enter a project title before saving template', 'error');
                return;
            }
            
            showNotification('Template saved successfully!', 'success');
            updateLastSaved();
        }

        function clearForm() {
            document.getElementById('projectTitle').value = '';
            document.getElementById('missionObjective').value = '';
            document.getElementById('acquisitionType').value = 'far';
            document.getElementById('securityLevel').value = 'cui';
            document.getElementById('contractValue').value = 'simplified';
            document.getElementById('rfpPreview').classList.add('hidden');
            
            // Reset compliance items
            Object.keys(complianceItems).forEach(key => {
                complianceItems[key] = true;
                const checkbox = document.getElementById(key);
                checkbox.classList.add('checked');
                checkbox.textContent = '✓';
            });
            
            updateProgress(0);
            showNotification('Form cleared', 'info');
        }

        // Chat functions
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            const messagesContainer = document.getElementById('chatMessages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<strong>You:</strong> ${message}`;
            messagesContainer.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                const aiMessage = document.createElement('div');
                aiMessage.className = 'message ai';
                aiMessage.innerHTML = `<strong>AI Assistant:</strong> ${aiResponse}`;
                messagesContainer.appendChild(aiMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        function generateAIResponse(message) {
            const responses = {
                'far': 'The Federal Acquisition Regulation (FAR) governs most federal procurement. Key requirements include competitive bidding, evaluation criteria, and specific contract clauses. Would you like me to explain any specific FAR part?',
                'ota': 'Other Transaction Authority allows for more flexible contracting outside traditional FAR requirements. OTAs are great for research and development or prototype projects. They can include IP arrangements not possible under FAR.',
                'cmmc': 'CMMC (Cybersecurity Maturity Model Certification) is mandatory for DoD contractors handling CUI. There are five maturity levels, with most contracts requiring Level 3. Implementation includes 130+ security controls.',
                'nist': 'NIST 800-171 provides security requirements for protecting Controlled Unclassified Information (CUI) in non-federal systems. It includes 14 control families with 110 security requirements.',
                'security': 'Security requirements depend on classification level. CUI requires NIST 800-171, while classified contracts need additional controls. Always include appropriate security clauses in your RFP.',
                'evaluation': 'Evaluation criteria should be clearly defined and weighted. Common factors include technical approach, management approach, past performance, and cost. Make sure criteria align with your actual needs.',
                'default': 'I can help with FAR regulations, security requirements, evaluation criteria, contract types, and more. What specific aspect of RFP development would you like to discuss?'
            };
            
            const lowerMessage = message.toLowerCase();
            
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            
            return responses.default;
        }

        // Utility functions
        function updateProgress(value) {
            if (value !== undefined) {
                document.getElementById('progressFill').style.width = value + '%';
                return;
            }
            
            let progress = 0;
            const title = document.getElementById('projectTitle').value;
            const objective = document.getElementById('missionObjective').value;
            
            if (title) progress += 25;
            if (objective) progress += 25;
            if (currentAcquisitionType) progress += 25;
            if (Object.values(complianceItems).some(item => item)) progress += 25;
            
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateLastSaved() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('lastSaved').textContent = timeString;
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set up form change listeners
            document.getElementById('projectTitle').addEventListener('input', updateProgress);
            document.getElementById('missionObjective').addEventListener('input', updateProgress);
            
            // Initialize progress
            updateProgress();
            
            // Show initial section
            showSection('generator');
        });
    </script>
</body>
</html>
